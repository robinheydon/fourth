///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

const std = @import("std");
const ng = @import("ng");

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Node = extern struct {
    pos: ng.Vec2,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Curve = extern struct {
    from: ng.Entity, // Link
    to: ng.Entity, // Link
    radius: f32,

    center: ng.Vec2 = .{ 0, 0 },
    start_angle: f32 = 0,
    end_angle: f32 = 0,
    clockwise: bool = false,
    width: u16 = 0,
    style: ng.Entity = ng.Entity.nil, // the lane style of this link

    offset: f32 = 0,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const CurveUpdateRequired = extern struct {};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Link = extern struct {
    start: ng.Entity, // start of the link
    end: ng.Entity, // the end of the link
    width: u16, // the width of the link in 0.1m
    style: ng.Entity, // the lane style of this link
};

pub const max_lanes = 16;

pub const LaneStyle = extern struct {
    width: [max_lanes]u16,
    kind: [max_lanes]LaneKind,
    num_lanes: u8,
};

pub const LaneKind = enum(u8) {
    sidewalk,
    shared_use,
    cycle_lane_up,
    cycle_lane_down,
    buslane_up,
    buslane_down,
    traffic_lane_up,
    traffic_lane_down,
    parking_lane_up,
    parking_lane_down,
    shoulder,
    medium,
    barrier,
    dirt,
    grass,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Construction = extern struct {
    step: f32 = 0,
    steps: f32,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const VehicleKind = enum(u8) {
    person,
    bicycle,
    cart,
    bus,
    car,
    truck,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Position = extern struct {
    pos: ng.Vec2,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Velocity = extern struct {
    vel: ng.Vec2,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Health = extern struct {
    hp: u8,
    max: u8,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
