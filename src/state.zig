///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

const std = @import("std");

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

const ng = @import("ng");

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub var running = true;

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub var frame_counter: usize = 0;
pub var average_frame_rate: u32 = 0;

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub var window: ng.Window = undefined;

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub var map_center: ng.Vec2 = .{ 10, 10 };
pub var map_zoom: f32 = 10;
pub var map_rotate: f32 = 0;

pub var camera: ng.Camera2D = .{};

pub var map_last_mouse: ng.Vec2 = .{ 0, 0 };
pub var map_start_click_x: f32 = 0;
pub var map_start_click_y: f32 = 0;
pub var map_state: MapState = .none;

pub var key_quit: ng.Key = .escape;
pub var key_toggle_fullscreen: ng.Key = .f11;
pub var key_move_up: ng.Key = .W;
pub var key_move_down: ng.Key = .S;
pub var key_move_left: ng.Key = .A;
pub var key_move_right: ng.Key = .D;
pub var key_move_up2: ng.Key = .up;
pub var key_move_down2: ng.Key = .down;
pub var key_move_left2: ng.Key = .left;
pub var key_move_right2: ng.Key = .right;

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const MapState = enum {
    none,
    clicked,
    dragging,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

pub const Node = extern struct {
    pos: ng.Vec2,
};

pub const Link = extern struct {
    start: ng.Entity, // start of the link
    mid: ng.Entity, // a mid point of the link, used for curves
    end: ng.Entity, // the end of the link
    width: u16, // the width of the link in 0.1m
};

pub const Construction = extern struct {
    step: f32,
    steps: f32,
};

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
